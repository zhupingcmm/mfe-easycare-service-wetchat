<!--allowance.wxml-->
<navigation-bar title="津贴计算" back="{{true}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <view class="form-section">
      <view class="form-title">津贴信息</view>
      
      <view class="form-item">
        <text class="field-icon">💰</text>
        <text class="label">政府发放金额（元）</text>
        <input 
          class="input" 
          type="digit" 
          placeholder="请输入金额" 
          value="{{govTotalAmount}}"
          bindinput="onGovTotalAmountInput"
        />
      </view>

      <view class="form-item">
        <text class="field-icon">💵</text>
        <text class="label">产前12个月平均工资（元）</text>
        <input 
          class="input" 
          type="digit" 
          placeholder="请输入平均工资" 
          value="{{avgSalaryBefore12Months}}"
          bindinput="onAvgSalaryBefore12MonthsInput"
        />
      </view>

      <view class="form-item">
        <text class="field-icon">💳</text>
        <text class="label">员工基本工资（元/月）</text>
        <input 
          class="input" 
          type="digit" 
          placeholder="请输入基本工资" 
          value="{{baseSalary}}"
          bindinput="onBaseSalaryInput"
        />
      </view>
    </view>

    <view class="button-group">
      <button class="btn btn-primary" bindtap="calculate">计算津贴</button>
      <button class="btn btn-secondary" bindtap="reset">重置</button>
    </view>

    <view class="result-section" wx:if="{{showResult && result}}">
      <view class="result-title">计算结果</view>
      
      <view class="result-card">
        <view class="result-main">
          <text class="result-label">预计总津贴</text>
          <text class="result-value">¥{{result.totalAmount}}</text>
        </view>
        
        <view class="result-breakdown">
          <view class="breakdown-item">
            <view class="breakdown-icon">💰</view>
            <view class="breakdown-content">
              <text class="breakdown-label">生育津贴</text>
              <text class="breakdown-value">¥{{result.maternityAllowance}}</text>
            </view>
          </view>
          
          <view class="breakdown-item">
            <view class="breakdown-icon">🏥</view>
            <view class="breakdown-content">
              <text class="breakdown-label">医疗费用</text>
              <text class="breakdown-value">¥{{result.medicalAllowance}}</text>
            </view>
          </view>
        </view>

        <view class="result-details">
          <text class="details-title">计算说明：</text>
          <view class="details-list">
            <text class="details-item" wx:for="{{result.details}}" wx:key="index">• {{item}}</text>
          </view>
        </view>
      </view>

      <view class="notice">
        <text class="notice-title">温馨提示</text>
        <text class="notice-text">以上金额为预估值，实际发放金额以社保部门审核为准。</text>
      </view>
    </view>
  </view>
</scroll-view>
